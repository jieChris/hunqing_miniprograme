<!--pages/store-detail/store-detail.wxml-->
<navigation-bar title="å•†æˆ·è¯¦æƒ…" back="{{true}}" color="white" background="#E91E63"></navigation-bar>

<scroll-view class="scrollarea" scroll-y type="list" wx:if="{{store}}">
  <!-- å•†æˆ·å¤´éƒ¨å›¾ç‰‡ -->
  <swiper class="store-swiper" indicator-dots="{{true}}" indicator-color="rgba(255,255,255,0.5)" indicator-active-color="#FFD700">
    <swiper-item wx:for="{{store.images}}" wx:key="index">
      <image class="store-image" src="{{item}}" mode="aspectFill"></image>
    </swiper-item>
  </swiper>

  <!-- å•†æˆ·åŸºæœ¬ä¿¡æ¯ -->
  <view class="store-info card">
    <view class="store-header">
      <text class="store-name">{{store.name}}</text>
      <view class="store-rating">
        <text class="rating-star">â˜…</text>
        <text class="rating-value">{{store.rating}}</text>
      </view>
    </view>
    <view class="store-meta">
      <view class="meta-item" bindtap="viewLocation">
        <text class="meta-icon">ğŸ“</text>
        <text class="meta-text">{{store.distanceText}} | {{store.address}}</text>
      </view>
      <view class="meta-item" bindtap="makePhoneCall" wx:if="{{store.phone}}">
        <text class="meta-icon">ğŸ“</text>
        <text class="meta-text">{{store.phone}}</text>
      </view>
    </view>
  </view>

  <!-- å•†æˆ·æè¿° -->
  <view class="store-description card" wx:if="{{store.description}}">
    <view class="section-title">å•†æˆ·ä»‹ç»</view>
    <text class="description-text">{{store.description}}</text>
  </view>

  <!-- æœåŠ¡é¡¹ç›® -->
  <view class="store-services card" wx:if="{{store.services && store.services.length > 0}}">
    <view class="section-title">æœåŠ¡é¡¹ç›®</view>
    <view class="services-list">
      <view class="service-item" wx:for="{{store.services}}" wx:key="index">
        <text class="service-icon">âœ“</text>
        <text class="service-name">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- å•†æˆ·å•†å“ -->
  <view class="store-products card" wx:if="{{products && products.length > 0}}">
    <view class="section-title">å•†å“å¥—é¤</view>
    <view class="products-list">
      <view 
        class="product-item" 
        wx:for="{{products}}" 
        wx:key="id"
        data-product="{{item}}"
        bindtap="onProductTap"
      >
        <product-card product="{{item}}"></product-card>
      </view>
    </view>
  </view>

  <!-- ç½‘å‹ç‚¹è¯„ -->
  <view class="store-comments card">
    <view class="section-title">ç½‘å‹ç‚¹è¯„</view>
    <view class="comments-list">
      <comment-item wx:for="{{comments}}" wx:key="id" comment="{{item}}"></comment-item>
    </view>
    <view wx:if="{{comments.length === 0}}" class="no-comments">
      <text>æš‚æ— è¯„è®º</text>
    </view>
  </view>
</scroll-view>

<!-- åŠ è½½ä¸­ -->
<view wx:if="{{!store}}" class="loading-container">
  <text>åŠ è½½ä¸­...</text>
</view>

